# 高性能缓存系统 (Cache System)

这是一个实现多种缓存策略的高性能缓存系统。支持多种经典的缓存算法，如 LRU（Least Recently Used）、LFU（Least Frequently Used）、LRU-K、LFU-Aging 和 ARC（Adaptive Replacement Cache）等。

### 功能特性

1. **缓存策略实现**
   - **LRU (Least Recently Used)**：基于最近最少使用的原则淘汰缓存。
   - **LFU (Least Frequently Used)**：基于访问频率最少的原则淘汰缓存。
   - **LRU-K**：在 LRU 基础上增加了一个 K 值，允许缓存只在被多次访问后才会进入缓存。
   - **LFU-Aging**：LFU 算法的变种，引入了衰减机制，减小老旧缓存的访问频率。
   - **ARC (Adaptive Replacement Cache)**：结合了 LRU 和 LFU，旨在更灵活地管理缓存，适应不同的工作负载。

2. **测试场景**
   - **热点数据访问测试**：模拟热点数据与冷数据的访问，测试各个缓存策略的命中率。
   - **循环扫描测试**：模拟数据的顺序访问与随机访问，评估缓存的性能。
   - **工作负载剧烈变化测试**：模拟工作负载在不同阶段的变化，考察缓存策略在不同访问模式下的表现。

3. **性能评估**
   - 每种缓存策略的命中率、缓存容量、操作次数等数据都会被记录并显示。
   - 提供详细的测试报告，帮助分析各个缓存策略的优缺点。

---

## 项目结构

```bash
project-root/
├── lib/
    ├── KICachePolicy.h          # 缓存策略接口
    ├── KLfuCache.h              # LFU 算法实现
    ├── KLruCache.h              # LRU 算法实现
    ├── KArcCache/               # ARC 算法实现
    │   └── KArcCache.h          # ARC 算法核心实现
├── test_policy.cpp              #主程序，包含各个测试场景的实现
└── README.md                    # 项目的文档说明

```

---

## 编译与运行
### 1.安装依赖
在运行项目前，需要确保以下库已安装：

+ **C++编译器**(支持 C++11 及以上版本)
+ **CMake**（用于编译和构建项目）

### 2.编译项目
``` bash
mkdir build
cd build
cmkae ..
make
./main
```

### 3. 输出结果

程序将会执行三个主要的测试场景，并输出每个测试的缓存命中率和性能评估。

---
## 测试场景
### 1. 热点数据访问测试 (Hot Data Access Test)
在此场景中，大部分操作将集中访问热点数据，30% 的操作是写入操作，70% 的操作是读取热点数据。目标是测试不同缓存策略在热点数据场景下的表现。
```
=== 测试场景1：热点数据访问测试 ===
=== 热点数据访问测试 结果汇总 ===
缓存大小: 20
LRU - 命中率: 49.30% (172402/349723)
LFU - 命中率: 66.72% (233446/349909)
ARC - 命中率: 65.77% (229899/349574)
LRU-K - 命中率: 55.07% (192716/349947)
LFU-Aging - 命中率: 66.88% (234182/350175)
```
### 2. 循环扫描测试 (Loop Pattern Test)
此测试场景模拟数据的顺序扫描和随机跳跃，80% 的操作为读取，20% 的操作为写入，目的是测试缓存策略在具有规律性访问模式下的性能。
```
=== 测试场景2：循环扫描测试 ===
=== 循环扫描测试 结果汇总 ===
缓存大小: 50
LRU - 命中率: 4.72% (7561/160154)
LFU - 命中率: 8.73% (13969/160054)
ARC - 命中率: 9.59% (15335/159869)
LRU-K - 命中率: 4.81% (7683/159725)
LFU-Aging - 命中率: 8.93% (14276/159896)
```
### 工作负载剧烈变化测试 (Workload Shift Test)
此测试模拟缓存中存储的数据随着时间发生剧烈变化的情况。测试将分为多个阶段，每个阶段的访问模式和比例不同，以模拟真实的负载变化。
```
=== 测试场景3：工作负载剧烈变化测试 ===
=== 工作负载剧烈变化测试 结果汇总 ===
缓存大小: 30
LRU - 命中率: 54.95% (35080/63837)
LFU - 命中率: 38.47% (24646/64073)
ARC - 命中率: 58.74% (37468/63782)
LRU-K - 命中率: 54.61% (34918/63935)
LFU-Aging - 命中率: 37.74% (24113/63896)
```

## 说明
### 说明：
- **功能特性**：简洁地介绍了支持的各种缓存策略（如 LRU、LFU、ARC 等），并且描述了每种策略的基本原理和应用场景。
- **项目结构**：列出了项目的主要文件和目录结构。
- **编译与运行**：提供了从源码编译并运行项目的步骤，帮助用户快速启动项目。
- **测试场景**：介绍了三个测试场景，说明它们的目的和功能。


此 `README.md` 文件将帮助其他开发者快速理解项目的结构和功能，同时提供详细的测试场景和运行说明。